<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    //执行顺序： 先执行 new Promise 中的函数 => 然后执行队列中的同步代码 例:console.log("ok") => 最后执行 then 回调的函数
    let pro1 = new Promise ((resolve,reject)=>{
        resolve("success"); // resolve 函数
        reject("error")     // reject  函数
        console.log("promise");
    })

    pro1.then((res)=>{
        //成功的回调
        console.log(res);
    },(e)=>{
        //失败的回调
        console.log(e);
    })
    console.log("ok");

    //---------------------------------------------------------------------------------------------------------------
    //图片的异步加载
    //then 方法
    function loadImg (url){
        return new Promise ((resolve,reject)=>{
            //判断 url 是否正确
            let img = new Image ();
            img.src = url;
            img.onload = function(img){
                resolve(img)
            },
            img.onerror = function (e){
                reject(e)
            }
        })
    }
    loadImg("url".then(()=>{
        element.appendChild(img)
    },(e)=>{
        console.log(e);
    }))

    //---------------------------------------------------------------------------------------------------------------

    //catch 方法
    function loadImg (url){
        return new Promise ((resolve,reject)=>{
            //判断 url 是否正确
            let img = new Image ();
            img.src = url;
            img.onload = function(img){
                resolve(img)
            },
            img.onerror = function (e){
                reject(e)
            }
        })
    }
    loadImg("url".then((img)=>{
        element.appendChild(img)
    }).catch((e)=>{
        console.log(e);
    }))

    //-------------------------------------------------------------------------------------------------------------
</script>
</html>